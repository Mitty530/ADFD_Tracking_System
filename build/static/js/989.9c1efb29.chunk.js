"use strict";(self.webpackChunkadfi_tracking_system=self.webpackChunkadfi_tracking_system||[]).push([[989],{989:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var t=r(43),a=r(66),l=r(216),n=r(736),o=r(579);const d=e=>{let{onClose:s}=e;const[r,a]=(0,t.useState)(""),[l,d]=(0,t.useState)(""),[i,c]=(0,t.useState)(""),[m,x]=(0,t.useState)(!1),[u,g]=(0,t.useState)(""),[h,b]=(0,t.useState)("");return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Change Password"}),(0,o.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&(0,o.jsx)("div",{className:"p-4 rounded-lg mb-4 "+("success"===h?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===h?(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,o.jsx)("span",{className:"text-sm",children:u})]})}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(!0),g(""),b(""),!r||!l||!i)return g("All fields are required"),b("error"),void x(!1);if(l!==i)return g("New passwords do not match"),b("error"),void x(!1);const t=(e=>{const s=/[A-Z]/.test(e),r=/[a-z]/.test(e),t=/\d/.test(e),a=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e.length<8?"Password must be at least 8 characters long":s?r?t?a?null:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"})(l);if(t)return g(t),b("error"),void x(!1);try{const{error:e}=await n.N.auth.updateUser({password:l});e?(g(e.message),b("error")):(g("Password updated successfully!"),b("success"),setTimeout(()=>{s()},2e3))}catch(a){g("An error occurred while updating your password"),b("error")}finally{x(!1)}},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,o.jsx)("input",{type:"password",id:"currentPassword",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"Enter your current password"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,o.jsx)("input",{type:"password",id:"newPassword",value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"Enter your new password"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,o.jsx)("input",{type:"password",id:"confirmPassword",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"Confirm your new password"})]}),(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,o.jsx)("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Password Requirements:"}),(0,o.jsxs)("ul",{className:"text-xs text-gray-500 space-y-1",children:[(0,o.jsx)("li",{children:"\u2022 At least 8 characters long"}),(0,o.jsx)("li",{children:"\u2022 Contains uppercase and lowercase letters"}),(0,o.jsx)("li",{children:"\u2022 Contains at least one number"}),(0,o.jsx)("li",{children:"\u2022 Contains at least one special character"})]})]}),(0,o.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors",children:m?"Updating...":"Update Password"})]})]})]})})},i=()=>{const{user:e,signOut:s,loading:r}=(0,a.A)(),n=(0,l.Zp)(),[i,c]=(0,t.useState)(!1),[m,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{c(!0)},[]),(0,t.useEffect)(()=>{r||e||(console.log("\ud83d\udd04 User not authenticated, redirecting to login..."),n("/login",{replace:!0}))},[e,r,n]);const u=e=>({admin:"System Administrator",archive_team:"Archive Team Member",loan_administrator:"Loan Administrator",head_of_operations:"Head of Operations",operations_team:"Operations Team Lead",core_banking:"Core Banking Team Member"}[e]||e);return r?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e?(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,o.jsx)("div",{className:"flex items-center space-x-4",children:(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ADFD Tracking System"})})}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-700",children:["Welcome, ",e.name]}),(0,o.jsx)("button",{onClick:()=>x(!0),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Change Password"}),(0,o.jsx)("button",{onClick:async()=>{try{console.log("\ud83d\udeaa Sign out button clicked - starting sign out process..."),localStorage.removeItem("adfd-remember-me"),localStorage.removeItem("adfd-saved-email"),console.log("\ud83e\uddf9 Cleared local storage data"),await s(),console.log("\u2705 User signed out successfully from Supabase"),n("/login",{replace:!0}),console.log("\ud83d\udd04 Navigation to login page initiated")}catch(e){console.error("\u274c Error signing out:",e),n("/login",{replace:!0})}},className:"bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors border border-red-200 hover:border-red-300 cursor-pointer relative z-10",title:"Sign out and return to login page",type:"button",children:"Sign Out"})]})]})})}),(0,o.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,o.jsxs)("div",{className:"space-y-8 "+(i?"animate-fade-in":""),children:[(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to ADFD Tracking System"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Secure financial request tracking and management platform"})]}),(0,o.jsx)("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g=e.role,{admin:"bg-purple-100 text-purple-800 border-purple-200",archive_team:"bg-blue-100 text-blue-800 border-blue-200",loan_administrator:"bg-green-100 text-green-800 border-green-200",head_of_operations:"bg-orange-100 text-orange-800 border-orange-200",operations_team:"bg-indigo-100 text-indigo-800 border-indigo-200",core_banking:"bg-red-100 text-red-800 border-red-200"}[g]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:u(e.role)})]})}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Profile"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,o.jsx)("p",{className:"text-gray-900",children:e.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,o.jsx)("p",{className:"text-gray-900",children:e.email})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,o.jsx)("p",{className:"text-gray-900",children:u(e.role)})]}),e.region&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),(0,o.jsx)("p",{className:"text-gray-900 capitalize",children:e.region.replace("_"," ")})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Permissions"}),(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:(e=>{const s=[];return null!==e&&void 0!==e&&e.can_create_requests&&s.push("Create Requests"),null!==e&&void 0!==e&&e.can_approve_reject&&s.push("Approve/Reject"),null!==e&&void 0!==e&&e.can_disburse&&s.push("Disburse Funds"),null!==e&&void 0!==e&&e.view_only_access&&s.push("View Only"),s})(e).map((e,s)=>(0,o.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,o.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,o.jsx)("span",{className:"text-sm font-medium text-green-800",children:e})]},s))})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Authentication"}),(0,o.jsx)("p",{className:"text-xs text-green-600",children:"Active"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Database"}),(0,o.jsx)("p",{className:"text-xs text-green-600",children:"Connected"})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,o.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"System"}),(0,o.jsx)("p",{className:"text-xs text-blue-600",children:"Ready"})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Next Steps"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-blue-900",children:"Change Your Password"}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"Update your temporary password to something secure"})]})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-blue-900",children:"Explore Your Role"}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"Familiarize yourself with your permissions and responsibilities"})]})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-blue-900",children:"Contact Support"}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"Reach out to the system administrator for any questions"})]})]})]})]})]})}),m&&(0,o.jsx)(d,{onClose:()=>x(!1)}),(0,o.jsx)("style",{children:"\n        @keyframes fade-in {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        .animate-fade-in {\n          animation: fade-in 0.6s ease-out;\n        }\n      "})]}):null;var g}}}]);
//# sourceMappingURL=989.9c1efb29.chunk.js.map