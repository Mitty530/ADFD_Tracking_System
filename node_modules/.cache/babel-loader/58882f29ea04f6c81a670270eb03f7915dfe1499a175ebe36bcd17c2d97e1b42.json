{"ast":null,"code":"import React,{useEffect,Suspense,lazy}from'react';import{BrowserRouter as Router,Routes,Route,useNavigate,useLocation}from'react-router-dom';import{AuthProvider}from'./contexts/AuthContext';import{usePerformance}from'./hooks/usePerformance';import{initializePerformanceOptimizations}from'./utils/performanceOptimizations';// Lazy load components for better performance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewLandingPage=/*#__PURE__*/lazy(()=>import('./components/NewLandingPage'));const Login=/*#__PURE__*/lazy(()=>import('./components/Login'));const Dashboard=/*#__PURE__*/lazy(()=>import('./components/Dashboard'));const ProtectedRoute=/*#__PURE__*/lazy(()=>import('./components/ProtectedRoute'));// Loading component\nconst LoadingSpinner=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',background:'linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'40px',height:'40px',border:'4px solid #e2e8f0',borderTop:'4px solid #3b82f6',borderRadius:'50%',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"style\",{children:`\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `})]});// Component to handle password reset redirects\nfunction PasswordResetRedirect(){const navigate=useNavigate();const location=useLocation();const{logPerformanceMetrics}=usePerformance();useEffect(()=>{// Check if we're on the home page with password reset tokens in the hash\nif(location.pathname==='/'&&location.hash.includes('type=recovery')){console.log('ðŸ”„ Redirecting password reset from home page to enter-new-password');// Redirect to enter-new-password page with the hash intact\nnavigate('/enter-new-password'+location.hash);}},[location,navigate]);useEffect(()=>{// Log performance metrics for the landing page\nlogPerformanceMetrics();},[logPerformanceMetrics]);return/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(LoadingSpinner,{}),children:/*#__PURE__*/_jsx(NewLandingPage,{})});}function App(){useEffect(()=>{// Initialize performance optimizations on app start\ninitializePerformanceOptimizations();},[]);return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(LoadingSpinner,{}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PasswordResetRedirect,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{})})})]})})})})});}export default App;","map":{"version":3,"names":["React","useEffect","Suspense","lazy","BrowserRouter","Router","Routes","Route","useNavigate","useLocation","AuthProvider","usePerformance","initializePerformanceOptimizations","jsx","_jsx","jsxs","_jsxs","NewLandingPage","Login","Dashboard","ProtectedRoute","LoadingSpinner","className","style","display","justifyContent","alignItems","height","background","children","width","border","borderTop","borderRadius","animation","PasswordResetRedirect","navigate","location","logPerformanceMetrics","pathname","hash","includes","console","log","fallback","App","path","element"],"sources":["/Users/mamadouourydiallo/ADFI/src/App.tsx"],"sourcesContent":["import React, { useEffect, Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Routes, Route, useNavigate, useLocation } from 'react-router-dom';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { usePerformance } from './hooks/usePerformance';\nimport { initializePerformanceOptimizations } from './utils/performanceOptimizations';\n\n// Lazy load components for better performance\nconst NewLandingPage = lazy(() => import('./components/NewLandingPage'));\nconst Login = lazy(() => import('./components/Login'));\nconst Dashboard = lazy(() => import('./components/Dashboard'));\nconst ProtectedRoute = lazy(() => import('./components/ProtectedRoute'));\n\n// Loading component\nconst LoadingSpinner: React.FC = () => (\n  <div className=\"loading-spinner\" style={{\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '100vh',\n    background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%)'\n  }}>\n    <div style={{\n      width: '40px',\n      height: '40px',\n      border: '4px solid #e2e8f0',\n      borderTop: '4px solid #3b82f6',\n      borderRadius: '50%',\n      animation: 'spin 1s linear infinite'\n    }} />\n    <style>{`\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `}</style>\n  </div>\n);\n\n// Component to handle password reset redirects\nfunction PasswordResetRedirect() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { logPerformanceMetrics } = usePerformance();\n\n  useEffect(() => {\n    // Check if we're on the home page with password reset tokens in the hash\n    if (location.pathname === '/' && location.hash.includes('type=recovery')) {\n      console.log('ðŸ”„ Redirecting password reset from home page to enter-new-password');\n      // Redirect to enter-new-password page with the hash intact\n      navigate('/enter-new-password' + location.hash);\n    }\n  }, [location, navigate]);\n\n  useEffect(() => {\n    // Log performance metrics for the landing page\n    logPerformanceMetrics();\n  }, [logPerformanceMetrics]);\n\n  return (\n    <Suspense fallback={<LoadingSpinner />}>\n      <NewLandingPage />\n    </Suspense>\n  );\n}\n\nfunction App() {\n  useEffect(() => {\n    // Initialize performance optimizations on app start\n    initializePerformanceOptimizations();\n  }, []);\n\n  return (\n    <AuthProvider>\n      <Router>\n        <div className=\"App\">\n          <Suspense fallback={<LoadingSpinner />}>\n            <Routes>\n              <Route path=\"/\" element={<PasswordResetRedirect />} />\n              <Route path=\"/login\" element={<Login />} />\n              <Route path=\"/dashboard\" element={\n                <ProtectedRoute>\n                  <Dashboard />\n                </ProtectedRoute>\n              } />\n            </Routes>\n          </Suspense>\n        </div>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}